#!/usr/bin/env python
"""Обновляет OGE тестовые данные — реалистичные параграфы с множеством масок."""
import os, django
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'main.settings')
django.setup()

from main.models import (
    OgePunktum, OgePunktumExample,
    OgeOrthogram, OgeOrthogramExample,
)

# ==============================================================
# ЗАДАНИЕ 6: Орфография — один абзац с 8+ смайликами
# ==============================================================
print("=== Обновляем данные задания 6 (орфография) ===")

# Удаляем старые примеры
OgeOrthogramExample.objects.all().delete()
OgeOrthogram.objects.all().delete()

# Создаём орфограмму с буквами а/о/е/и/я
orth1, _ = OgeOrthogram.objects.get_or_create(
    id='101',
    defaults={
        'name': 'Безударная гласная в корне',
        'rule': 'Проверяемая безударная в корне',
        'letters': 'а,о,е,и,я',
    }
)

# Один большой пример с МНОЖЕСТВОМ масок в одном абзаце
# Формат: *101* — маска для орфограммы 101
OgeOrthogramExample.objects.create(
    orthogram=orth1,
    text=(
        'Хотя шмель вышел из зимнего сна благодаря теплу, но всё-таки было '
        'прохладно, и шмель начал согревать себя сам, быстро сокращая мышцы '
        'груди и оставляя неподвижными крылья. Он разогревался, как мотор, '
        'и желание полёта возникало в нём всё настойчивее.'
    ),
    masked_word=(
        'Хотя шмель вышел из зимнего сна бл*101*годаря теплу, но всё-таки было '
        'прохладно, и шмель нач*101*л с*101*гревать себя сам, быстро сокр*101*щая мышцы '
        'груди и ост*101*вляя неп*101*движными крыл*101*я. Он р*101*зогревался, как м*101*тор, '
        'и желание п*101*лёта возникало в нём всё настойчивее.'
    ),
    correct_letters='а,а,о,а,а,о,ь,а,о,о',
    is_active=True,
)

# Второй пример
OgeOrthogramExample.objects.create(
    orthogram=orth1,
    text=(
        'Весенний дождь освежил землю. Деревья покрылись молодой листвой, '
        'а в полях зазеленела озимая пшеница. Воздух наполнился ароматом '
        'цветущих садов, и птицы запели свои весёлые песни.'
    ),
    masked_word=(
        'В*101*сенний дождь осв*101*жил з*101*млю. Д*101*ревья покрылись м*101*лодой л*101*ствой, '
        'а в п*101*лях заз*101*ленела оз*101*мая пш*101*ница. Воздух нап*101*лнился ар*101*матом '
        'цв*101*тущих с*101*дов, и птицы зап*101*ли свои в*101*сёлые песни.'
    ),
    correct_letters='е,е,е,е,о,и,о,е,и,е,о,о,е,а,е,е',
    is_active=True,
)

print(f"✓ Орфограмм: {OgeOrthogram.objects.count()}, примеров: {OgeOrthogramExample.objects.count()}")

# ==============================================================
# ЗАДАНИЕ 4: Пунктуация — тексты с кликабельными масками
# ==============================================================
print("\n=== Обновляем данные задания 4 (пунктуация) ===")

OgePunktumExample.objects.all().delete()
OgePunktum.objects.all().delete()

# Создаём пунктограммы
punkt_types = [
    ('2100', 'Тире', 'Постановка тире между подлежащим и сказуемым', '—,:,!,?,«»'),
    ('2101', 'Двоеточие', 'Постановка двоеточия в бессоюзном предложении', '—,:,!,?,«»'),
    ('2102', 'Запятая', 'Постановка запятой при однородных членах и обособлениях', '—,:,!,?,«»'),
    ('2103', 'Кавычки', 'Постановка кавычек при прямой речи и названиях', '—,:,!,?,«»'),
]
for pid, name, rule, letters in punkt_types:
    OgePunktum.objects.get_or_create(
        id=pid,
        defaults={'name': name, 'rule': rule, 'letters': letters}
    )

# Тире — текст с несколькими масками
OgePunktumExample.objects.create(
    punktum_id='2100',
    text=(
        'Москва — столица России. Байкал — самое глубокое озеро в мире. '
        'Книга — лучший подарок.'
    ),
    masked_word=(
        'Москва *2100* столица России. Байкал *2100* самое глубокое озеро в мире. '
        'Книга *2100* лучший подарок.'
    ),
    explanation='—,—,—',
    is_active=True,
)

# Двоеточие
OgePunktumExample.objects.create(
    punktum_id='2101',
    text=(
        'Я знал: она обязательно придёт. Он любил три вещи: книги, музыку и путешествия. '
        'Вдруг раздался крик: медведь появился на опушке.'
    ),
    masked_word=(
        'Я знал*2101* она обязательно придёт. Он любил три вещи*2101* книги, музыку и путешествия. '
        'Вдруг раздался крик*2101* медведь появился на опушке.'
    ),
    explanation=':,:,:',
    is_active=True,
)

# Запятая
OgePunktumExample.objects.create(
    punktum_id='2102',
    text=(
        'На столе лежали книги, тетради, ручки и карандаши. '
        'Солнце, выглянувшее из-за туч, осветило поляну.'
    ),
    masked_word=(
        'На столе лежали книги*2102* тетради*2102* ручки и карандаши. '
        'Солнце*2102* выглянувшее из-за туч*2102* осветило поляну.'
    ),
    explanation='!,!,!,!',
    is_active=True,
)

# Кавычки
OgePunktumExample.objects.create(
    punktum_id='2103',
    text=(
        'Мать сказала: «Иди домой». Газета «Известия» опубликовала статью. '
        'Он прочитал роман «Война и мир».'
    ),
    masked_word=(
        'Мать сказала: *2103*Иди домой*2103*. Газета *2103*Известия*2103* опубликовала статью. '
        'Он прочитал роман *2103*Война и мир*2103*.'
    ),
    explanation='«»,«»,«»,«»,«»,«»',
    is_active=True,
)

print(f"✓ Пунктограмм: {OgePunktum.objects.count()}, примеров: {OgePunktumExample.objects.count()}")

print("\n✅ Данные обновлены!")
